<%= select_tag('statistic_choice', options_for_select(@options), include_blank: true, class: @class_name, style: "width: 100%;min-width: 300px;") %>

<script>
  $(document).ready(function() { 
    $("#statistic_choice").select2({
    }); 
  });

  $('#statistic_choice').on('select2:select', function (e) {
    const grouping = $("#statistic_choice").find(":selected").data("grouping")

    let route
    if (grouping) {
      route = `${e.target.value}?grouping=${grouping}`
    } else {
      route = e.target.value
    }

    window.location.href = `/leaderboards/${route}`
  });

  $(document).on('select2:open', () => {
    document.querySelector('.select2-search__field').focus();
  });
</script>